<script defer>
    (function () {
        const video = document.querySelector('td.roumingForumMessage[align="center"] video, td.masoForumMessage[align="center"] video');
        if (video === null) return;

        let data = JSON.parse(localStorage.getItem('gifnik-sound'));
        if (data !== null) {
            video.volume = data.volume;
            video.muted = data.muted;
        }

        const volumeHandler = function () {
            localStorage.setItem('gifnik-sound', JSON.stringify({volume: video.volume, muted: video.muted}));
        };

        video.addEventListener('volumechange', volumeHandler, {capture: false, passive: true});
    })();
</script>
